<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Installation Modes | SkillTree Docs</title>
    <meta name="generator" content="VuePress 1.8.2">
    <link rel="icon" href="/img/skilltree.ico">
    <meta name="description" content="Innovative approach to application training!">
    
    <link rel="preload" href="/assets/css/0.styles.8bf16f69.css" as="style"><link rel="preload" href="/assets/js/app.18f93df7.js" as="script"><link rel="preload" href="/assets/js/2.703736e5.js" as="script"><link rel="preload" href="/assets/js/70.eddd348c.js" as="script"><link rel="preload" href="/assets/js/45.39615dab.js" as="script"><link rel="preload" href="/assets/js/56.9f958365.js" as="script"><link rel="preload" href="/assets/js/64.b0239d01.js" as="script"><link rel="preload" href="/assets/js/65.c4a2592c.js" as="script"><link rel="prefetch" href="/assets/js/10.5f65e49f.js"><link rel="prefetch" href="/assets/js/100.47b5c03d.js"><link rel="prefetch" href="/assets/js/101.8d6b8cdc.js"><link rel="prefetch" href="/assets/js/102.5648c77e.js"><link rel="prefetch" href="/assets/js/103.1e62ac2a.js"><link rel="prefetch" href="/assets/js/104.bb6eae66.js"><link rel="prefetch" href="/assets/js/105.fccbd274.js"><link rel="prefetch" href="/assets/js/106.f1c19953.js"><link rel="prefetch" href="/assets/js/11.4c9559db.js"><link rel="prefetch" href="/assets/js/12.c8071854.js"><link rel="prefetch" href="/assets/js/13.e2d4a96f.js"><link rel="prefetch" href="/assets/js/14.ab8dc818.js"><link rel="prefetch" href="/assets/js/15.099ceb55.js"><link rel="prefetch" href="/assets/js/16.4c755b60.js"><link rel="prefetch" href="/assets/js/17.61a7fb5d.js"><link rel="prefetch" href="/assets/js/18.6be741e5.js"><link rel="prefetch" href="/assets/js/19.2f222191.js"><link rel="prefetch" href="/assets/js/20.2ef221ef.js"><link rel="prefetch" href="/assets/js/21.943ee38e.js"><link rel="prefetch" href="/assets/js/22.e72bcf8f.js"><link rel="prefetch" href="/assets/js/23.7a5c0d46.js"><link rel="prefetch" href="/assets/js/24.e93bbcda.js"><link rel="prefetch" href="/assets/js/25.c219b298.js"><link rel="prefetch" href="/assets/js/26.5140ecf9.js"><link rel="prefetch" href="/assets/js/27.5e3374c9.js"><link rel="prefetch" href="/assets/js/28.4e32cdec.js"><link rel="prefetch" href="/assets/js/29.018a2d61.js"><link rel="prefetch" href="/assets/js/3.5371cb32.js"><link rel="prefetch" href="/assets/js/30.63d3b838.js"><link rel="prefetch" href="/assets/js/31.00a6c383.js"><link rel="prefetch" href="/assets/js/32.ab97cbe9.js"><link rel="prefetch" href="/assets/js/33.ebdfec41.js"><link rel="prefetch" href="/assets/js/34.0fd5f419.js"><link rel="prefetch" href="/assets/js/35.b1940973.js"><link rel="prefetch" href="/assets/js/36.fa92d925.js"><link rel="prefetch" href="/assets/js/37.1f9a8479.js"><link rel="prefetch" href="/assets/js/38.a4a49402.js"><link rel="prefetch" href="/assets/js/39.82e698b2.js"><link rel="prefetch" href="/assets/js/4.925033b7.js"><link rel="prefetch" href="/assets/js/40.e02a832e.js"><link rel="prefetch" href="/assets/js/41.29e1215a.js"><link rel="prefetch" href="/assets/js/42.2433f0ac.js"><link rel="prefetch" href="/assets/js/43.e0f89117.js"><link rel="prefetch" href="/assets/js/44.f57bfba7.js"><link rel="prefetch" href="/assets/js/46.dd9d6c2b.js"><link rel="prefetch" href="/assets/js/47.ffa323f9.js"><link rel="prefetch" href="/assets/js/48.9f405014.js"><link rel="prefetch" href="/assets/js/49.7896ef80.js"><link rel="prefetch" href="/assets/js/5.6253e363.js"><link rel="prefetch" href="/assets/js/50.adf707f4.js"><link rel="prefetch" href="/assets/js/51.38411d56.js"><link rel="prefetch" href="/assets/js/52.f8d95c4b.js"><link rel="prefetch" href="/assets/js/53.4158d9b9.js"><link rel="prefetch" href="/assets/js/54.e1d5a2e4.js"><link rel="prefetch" href="/assets/js/55.27a30dd9.js"><link rel="prefetch" href="/assets/js/57.9733b76f.js"><link rel="prefetch" href="/assets/js/58.11a54435.js"><link rel="prefetch" href="/assets/js/59.9f75f03b.js"><link rel="prefetch" href="/assets/js/6.c7e10eab.js"><link rel="prefetch" href="/assets/js/60.bbdb992c.js"><link rel="prefetch" href="/assets/js/61.719d5871.js"><link rel="prefetch" href="/assets/js/62.02988cc2.js"><link rel="prefetch" href="/assets/js/63.098127e7.js"><link rel="prefetch" href="/assets/js/66.5fe83433.js"><link rel="prefetch" href="/assets/js/67.8d65c18c.js"><link rel="prefetch" href="/assets/js/68.2b458188.js"><link rel="prefetch" href="/assets/js/69.e0d3c4d2.js"><link rel="prefetch" href="/assets/js/7.dde6a0ed.js"><link rel="prefetch" href="/assets/js/71.2020e008.js"><link rel="prefetch" href="/assets/js/72.ca6d66ea.js"><link rel="prefetch" href="/assets/js/73.3997424a.js"><link rel="prefetch" href="/assets/js/74.e4e528ab.js"><link rel="prefetch" href="/assets/js/75.3ec4547e.js"><link rel="prefetch" href="/assets/js/76.861b18be.js"><link rel="prefetch" href="/assets/js/77.9d010ca0.js"><link rel="prefetch" href="/assets/js/78.8852b970.js"><link rel="prefetch" href="/assets/js/79.b039fb2d.js"><link rel="prefetch" href="/assets/js/8.f4d97bc5.js"><link rel="prefetch" href="/assets/js/80.787200f5.js"><link rel="prefetch" href="/assets/js/81.0aad6e94.js"><link rel="prefetch" href="/assets/js/82.738d80df.js"><link rel="prefetch" href="/assets/js/83.6e898972.js"><link rel="prefetch" href="/assets/js/84.881f1922.js"><link rel="prefetch" href="/assets/js/85.0e9cd8e0.js"><link rel="prefetch" href="/assets/js/86.1a7366ba.js"><link rel="prefetch" href="/assets/js/87.9ae80c46.js"><link rel="prefetch" href="/assets/js/88.4f43eede.js"><link rel="prefetch" href="/assets/js/89.461a02a6.js"><link rel="prefetch" href="/assets/js/9.ae2949f7.js"><link rel="prefetch" href="/assets/js/90.ac580251.js"><link rel="prefetch" href="/assets/js/91.b63bd6b0.js"><link rel="prefetch" href="/assets/js/92.354a76f3.js"><link rel="prefetch" href="/assets/js/93.0e140197.js"><link rel="prefetch" href="/assets/js/94.cf2d7dda.js"><link rel="prefetch" href="/assets/js/95.855817be.js"><link rel="prefetch" href="/assets/js/96.b4c188ca.js"><link rel="prefetch" href="/assets/js/97.ff2db230.js"><link rel="prefetch" href="/assets/js/98.ddebcee2.js"><link rel="prefetch" href="/assets/js/99.786f0a02.js">
    <link rel="stylesheet" href="/assets/css/0.styles.8bf16f69.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">SkillTree Docs</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/overview/" class="nav-link">
  Overview
</a></div><div class="nav-item"><a href="/dashboard/install-guide/" class="nav-link router-link-active">
  Install Guide
</a></div><div class="nav-item"><a href="/dashboard/user-guide/" class="nav-link">
  Dashboard User Guide
</a></div><div class="nav-item"><a href="/skills-client/" class="nav-link">
  Integration Guide
</a></div><div class="nav-item"><a href="/contribution/" class="nav-link">
  Contribute
</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/overview/" class="nav-link">
  Overview
</a></div><div class="nav-item"><a href="/dashboard/install-guide/" class="nav-link router-link-active">
  Install Guide
</a></div><div class="nav-item"><a href="/dashboard/user-guide/" class="nav-link">
  Dashboard User Guide
</a></div><div class="nav-item"><a href="/skills-client/" class="nav-link">
  Integration Guide
</a></div><div class="nav-item"><a href="/contribution/" class="nav-link">
  Contribute
</a></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/overview/" class="sidebar-link">Overview</a></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>Install Guide</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/dashboard/install-guide/" aria-current="page" class="sidebar-link">Overview</a></li><li><a href="/dashboard/install-guide/quickStart.html" class="sidebar-link">Quick Start</a></li><li><a href="/dashboard/install-guide/distributions.html" class="sidebar-link">Distributions</a></li><li><a href="/dashboard/install-guide/devInstall.html" class="sidebar-link">Development Installation</a></li><li><a href="/dashboard/install-guide/prodInstall.html" class="sidebar-link">Production Installation</a></li><li><a href="/dashboard/install-guide/config.html" class="sidebar-link">Configuration</a></li><li><a href="/dashboard/install-guide/database.html" class="sidebar-link">Database</a></li><li><a href="/dashboard/install-guide/installModes.html" aria-current="page" class="active sidebar-link">Installation Modes</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/dashboard/install-guide/installModes.html#password-auth-mode" class="sidebar-link">Password Auth Mode</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/dashboard/install-guide/installModes.html#oauth-support" class="sidebar-link">OAuth Support</a></li></ul></li><li class="sidebar-sub-header"><a href="/dashboard/install-guide/installModes.html#pki-auth-mode" class="sidebar-link">PKI Auth Mode</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/dashboard/install-guide/installModes.html#user-info-service" class="sidebar-link">User Info Service</a></li></ul></li></ul></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Dashboard User Guide</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Integration Guide</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Open Source Contributions</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Release Notes</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="installation-modes"><a href="#installation-modes" class="header-anchor">#</a> Installation Modes</h1> <p>The SkillTree dashboard and service (skills-service) support two separate modes of authentication.  The dashboard can be configured for password based authentication <em>or</em> PKI based authentication.</p> <ul><li><a href="/dashboard/install-guide/installModes.html#password-auth-mode">Password Auth Mode</a>: Accounts created and managed by SkillTree and/or delegated to OAuth2 authentication provider (ex. GitHub, Google, etc..)</li> <li><a href="/dashboard/install-guide/installModes.html#pki-auth-mode">PKI Auth Mode</a>: PKI Mode is for intranets where organizations utilize PKI with 2-way SSL certificates to implement authentication and authorization. User's browser must be setup with a personal PKI certificate and that certificate must be issued by a Certificate Authority trusted in the dashboard application's truststore.</li></ul> <div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>Definitely use Password Auth Mode if you are not sure which mode is applicable to you.</p></div> <h2 id="password-auth-mode"><a href="#password-auth-mode" class="header-anchor">#</a> Password Auth Mode</h2> <p>When configured for password based authentication, users will need to manually create a SkillTree account by clicking on the &quot;Sign Up&quot; link on the main login page.  After creating an account, users can login using the username and password that was used when creating the account.</p> <p>Password Auth Mode is enabled by default, or can be explicitly enabled by setting the following property:</p> <div class="language-properties extra-class"><pre class="language-properties"><code><span class="token attr-name">skills.authorization.authMode</span><span class="token punctuation">=</span><span class="token attr-value">FORM</span>
</code></pre></div><h3 id="oauth-support"><a href="#oauth-support" class="header-anchor">#</a> OAuth Support</h3> <div class="content__default" data-v-5b51558b><p>When using Password Auth Mode, the dashboard can also support OAuth2 based authentication.
Currently, OAuth2 is only supported for Google, GitHub, GitLab and Azure Active Directory.  Login buttons get automatically added to the Login page when configured.  To configure, you will need a client ID and client Secret credentials.  These credentials can be created and managed through the providers OAuth management pages found here: <a href="https://console.developers.google.com/apis/credentials" target="_blank" rel="noopener noreferrer">Google<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>, <a href="https://github.com/settings/developers" target="_blank" rel="noopener noreferrer">GitHub<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>, <a href="https://gitlab.com/-/profile/applications" target="_blank" rel="noopener noreferrer">GitLab<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>, and <a href="https://portal.azure.com/" target="_blank" rel="noopener noreferrer">Azure AD<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>.</p> <p>Once the client ID and secret are set up, they are enabled by adding the following properties:</p> <div class="language-properties extra-class"><pre class="language-properties"><code><span class="token comment"># Google</span>
<span class="token attr-name">spring.security.oauth2.client.registration.google.client-id</span><span class="token punctuation">=</span><span class="token attr-value">&lt;Google client id here&gt;</span>
<span class="token attr-name">spring.security.oauth2.client.registration.google.client-secret</span><span class="token punctuation">=</span><span class="token attr-value">&lt;Google client secret here&gt;</span>
<span class="token attr-name">spring.security.oauth2.client.registration.google.redirectUriTemplate</span><span class="token punctuation">=</span><span class="token attr-value">'https://&lt;SkillTree Dashboard Host&gt;/{action}/oauth2/code/{registrationId}'</span>
<span class="token attr-name">spring.security.oauth2.client.registration.google.iconClass</span><span class="token punctuation">=</span><span class="token attr-value">fab fa-google</span>

<span class="token comment"># GitHub</span>
<span class="token attr-name">spring.security.oauth2.client.registration.github.client-id</span><span class="token punctuation">=</span><span class="token attr-value">&lt;GitHub client id here&gt;</span>
<span class="token attr-name">spring.security.oauth2.client.registration.github.client-secret</span><span class="token punctuation">=</span><span class="token attr-value">&lt;GitHub client secret here&gt;</span>
<span class="token attr-name">spring.security.oauth2.client.registration.github.redirectUriTemplate</span><span class="token punctuation">=</span><span class="token attr-value">'https://&lt;SkillTree Dashboard Host&gt;/{action}/oauth2/code/{registrationId}'</span>
<span class="token attr-name">spring.security.oauth2.client.registration.github.iconClass</span><span class="token punctuation">=</span><span class="token attr-value">fab fa-github</span>

<span class="token comment"># GitLab</span>
<span class="token attr-name">spring.security.oauth2.client.registration.gitlab.client-id</span><span class="token punctuation">=</span><span class="token attr-value">&lt;GitLab client id here&gt;</span>
<span class="token attr-name">spring.security.oauth2.client.registration.gitlab.client-secret</span><span class="token punctuation">=</span><span class="token attr-value">&lt;GitLab  client secret here&gt;</span>
<span class="token attr-name">spring.security.oauth2.client.registration.gitlab.redirect-uri</span><span class="token punctuation">=</span><span class="token attr-value">https://&lt;SkillTree Dashboard URL&gt;/{action}/oauth2/code/{registrationId}</span>
<span class="token attr-name">spring.security.oauth2.client.registration.gitlab.authorization-grant-type</span><span class="token punctuation">=</span><span class="token attr-value">authorization_code</span>
<span class="token attr-name">spring.security.oauth2.client.registration.gitlab.clientName</span><span class="token punctuation">=</span><span class="token attr-value">GitLab</span>
<span class="token attr-name">spring.security.oauth2.client.registration.gitlab.iconClass</span><span class="token punctuation">=</span><span class="token attr-value">fab fa-gitlab</span>
<span class="token attr-name">spring.security.oauth2.client.provider.gitlab.authorization-uri</span><span class="token punctuation">=</span><span class="token attr-value">https://gitlab.com/oauth/authorize</span>
<span class="token attr-name">spring.security.oauth2.client.provider.gitlab.token-uri</span><span class="token punctuation">=</span><span class="token attr-value">https://gitlab.com/oauth/token</span>
<span class="token attr-name">spring.security.oauth2.client.provider.gitlab.user-info-uri</span><span class="token punctuation">=</span><span class="token attr-value">https://gitlab.com/api/v4/user</span>
<span class="token attr-name">spring.security.oauth2.client.provider.gitlab.user-name-attribute</span><span class="token punctuation">=</span><span class="token attr-value">username</span>

<span class="token comment"># Azure AD</span>
<span class="token attr-name">spring.security.oauth2.client.registration.azure.client-id</span><span class="token punctuation">=</span><span class="token attr-value">&lt;Azure App Registration client ID&gt;</span>
<span class="token attr-name">spring.security.oauth2.client.registration.azure.client-secret</span><span class="token punctuation">=</span><span class="token attr-value">&lt;Azure App Registration client secret&gt;</span>
<span class="token attr-name">spring.security.oauth2.client.registration.azure.redirect-uri</span><span class="token punctuation">=</span><span class="token attr-value">https://&lt;SkillTree Dashboard URL&gt;/{action}/oauth2/code/{registrationId}</span>
<span class="token attr-name">spring.security.oauth2.client.registration.azure.iconClass</span><span class="token punctuation">=</span><span class="token attr-value">fab fa-microsoft</span>
<span class="token attr-name">spring.security.oauth2.client.registration.azure.scope</span><span class="token punctuation">=</span><span class="token attr-value">openid,profile,email</span>
<span class="token attr-name">spring.security.oauth2.client.registration.azure.authorization-grant-type</span><span class="token punctuation">=</span><span class="token attr-value">authorization_code</span>
<span class="token attr-name">spring.security.oauth2.client.registration.azure.client-name</span><span class="token punctuation">=</span><span class="token attr-value">Azure</span>
<span class="token attr-name">spring.security.oauth2.client.registration.azure.provider</span><span class="token punctuation">=</span><span class="token attr-value">azuread</span>
<span class="token attr-name">spring.security.oauth2.client.provider.azuread.authorization-uri</span><span class="token punctuation">=</span><span class="token attr-value">https://login.microsoftonline.com/common/oauth2/v2.0/authorize</span>
<span class="token attr-name">spring.security.oauth2.client.provider.azuread.token-uri</span><span class="token punctuation">=</span><span class="token attr-value">https://login.microsoftonline.com/common/oauth2/v2.0/token</span>
<span class="token attr-name">spring.security.oauth2.client.provider.azuread.user-info-uri</span><span class="token punctuation">=</span><span class="token attr-value">https://graph.microsoft.com/oidc/userinfo</span>
<span class="token attr-name">spring.security.oauth2.client.provider.azuread.jwk-set-uri</span><span class="token punctuation">=</span><span class="token attr-value">https://login.microsoftonline.com/common/discovery/keys</span>
</code></pre></div><p>Excluding a provider configuration section will prevent the respective OAuth login button from being added to the Login page.</p> <p>Note: To disable username/password authentication entirely and <em>only</em> support OAuth based authentication, set the following configuration property:</p> <div class="language-properties extra-class"><pre class="language-properties"><code><span class="token attr-name">skills.authorization.oAuthOnly</span><span class="token punctuation">=</span><span class="token attr-value">true</span>
</code></pre></div></div> <h2 id="pki-auth-mode"><a href="#pki-auth-mode" class="header-anchor">#</a> PKI Auth Mode</h2> <p>PKI Mode is for intranets where organizations utilize PKI with 2-way SSL certificates to implement authentication and authorization.
When configured for PKI based authentication, the user's browser must be setup with a personal PKI certificate and that certificate must be issued by a Certificate Authority trusted in the dashboard application's truststore.</p> <p>To enable PKI Auth Mode, set the following configuration property:</p> <div class="language-properties extra-class"><pre class="language-properties"><code><span class="token attr-name">skills.authorization.authMode</span><span class="token punctuation">=</span><span class="token attr-value">PKI</span>
</code></pre></div><p>PKI Mode requires:</p> <ul><li>running <code>User Info Service</code></li> <li>configuring client properties to communicate with <code>User Info Service</code></li></ul> <h3 id="user-info-service"><a href="#user-info-service" class="header-anchor">#</a> User Info Service</h3> <p>In PKI Mode, users authenticate using PKI certificates - the only information that is extracted from a client certificate is the Distinguished Name (DN).
The User Info Service provides a way to look up users' metadata by DN, such as name and email.
It is your responsibility to implement and run an instance of User Info Service specific to your organization.</p> <p>The User Info Service is configured in the skills-service by adding the following configuration properties:</p> <div class="content__default" data-v-5b51558b><div class="language-properties extra-class"><pre class="language-properties"><code><span class="token comment"># To retrieve user info by DN</span>
<span class="token attr-name">skills.authorization.userInfoUri</span><span class="token punctuation">=</span><span class="token attr-value">https://&lt;host&gt;:&lt;port&gt;/userInfo?dn={dn}</span>
<span class="token comment"># Used by dashboard dropdowns to suggest existing users</span>
<span class="token attr-name">skills.authorization.userQueryUri</span><span class="token punctuation">=</span><span class="token attr-value">https://&lt;host&gt;:&lt;port&gt;/userQuery?query={query}</span>
<span class="token comment"># skills-service checks the health of User Info Service</span>
<span class="token attr-name">skills.authorization.userInfoHealthCheckUri</span><span class="token punctuation">=</span><span class="token attr-value">https://&lt;host&gt;:&lt;port&gt;/actuator/health</span>
</code></pre></div></div> <p>The User Info Service will need to implement the following REST endpoints that can return user information for the client certificate's Distinguished Name (DN):</p> <ul><li>skills.authorization.userInfoUri</li> <li>skills.authorization.userQueryUri</li> <li>skills.authorization.userInfoHealthCheckUri</li></ul> <h4 id="skills-authorization-userinfouri-endpoint"><a href="#skills-authorization-userinfouri-endpoint" class="header-anchor">#</a> skills.authorization.userInfoUri endpoint</h4> <p>This endpoint returns user information by DN. The endpoint is configured via the <code>skills.authorization.userInfoUri</code> property and expects a DN parameter, for example <code>/userInfo?dn={dn}</code>.<br>
This endpoint must return valid JSON with the following properties for a given user's DN:</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
    <span class="token property">&quot;firstName&quot;</span><span class="token operator">:</span><span class="token string">&quot;&lt;value&gt;&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;lastFirstName&quot;</span><span class="token operator">:</span><span class="token string">&quot;&lt;value&gt;&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;email&quot;</span><span class="token operator">:</span><span class="token string">&quot;&lt;value&gt;&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;username&quot;</span><span class="token operator">:</span><span class="token string">&quot;&lt;value&gt;&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;userDn&quot;</span><span class="token operator">:</span><span class="token string">&quot;&lt;value&gt;&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;usernameForDisplay&quot;</span><span class="token operator">:</span><span class="token string">&quot;&lt;value&gt;&quot;</span>
<span class="token punctuation">}</span>
</code></pre></div><ul><li><em>username:</em> property is a user's unique identifier; can be a number formatted as a string, ex. <code>000001</code></li> <li><em>usernameForDisplay:</em> this is how user will be display in the SkillTree dashboard</li></ul> <h4 id="skills-authorization-userqueryuri-endpoint"><a href="#skills-authorization-userqueryuri-endpoint" class="header-anchor">#</a> skills.authorization.userQueryUri endpoint</h4> <p>This endpoint is used by the SkillTree dashboard dropdowns to suggest existing users.</p> <p>The endpoint is configured via the <code>skills.authorization.userQueryUri</code> property and expects a query parameter, for example: <code>/userQuery?query={query}</code>.
This endpoint must return a list of the above JSON objects for user DN's that meet the query criteria. For example:</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
        <span class="token property">&quot;firstName&quot;</span><span class="token operator">:</span><span class="token string">&quot;&lt;value&gt;&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;lastFirstName&quot;</span><span class="token operator">:</span><span class="token string">&quot;&lt;value&gt;&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;email&quot;</span><span class="token operator">:</span><span class="token string">&quot;&lt;value&gt;&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;username&quot;</span><span class="token operator">:</span><span class="token string">&quot;&lt;value&gt;&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;userDn&quot;</span><span class="token operator">:</span><span class="token string">&quot;&lt;value&gt;&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;usernameForDisplay&quot;</span><span class="token operator">:</span><span class="token string">&quot;&lt;value&gt;&quot;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
        <span class="token property">&quot;firstName&quot;</span><span class="token operator">:</span><span class="token string">&quot;&lt;value&gt;&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;lastFirstName&quot;</span><span class="token operator">:</span><span class="token string">&quot;&lt;value&gt;&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;email&quot;</span><span class="token operator">:</span><span class="token string">&quot;&lt;value&gt;&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;username&quot;</span><span class="token operator">:</span><span class="token string">&quot;&lt;value&gt;&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;userDn&quot;</span><span class="token operator">:</span><span class="token string">&quot;&lt;value&gt;&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;usernameForDisplay&quot;</span><span class="token operator">:</span><span class="token string">&quot;&lt;value&gt;&quot;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">]</span>
</code></pre></div><h4 id="skills-authorization-userinfohealthcheckuri-endpoint"><a href="#skills-authorization-userinfohealthcheckuri-endpoint" class="header-anchor">#</a> skills.authorization.userInfoHealthCheckUri endpoint</h4> <p>Health check endpoint.
The endpoint is configured via the <code>skills.authorization.userInfoHealthCheckUri</code> property and should return the following JSON object:</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span><span class="token property">&quot;status&quot;</span><span class="token operator">:</span><span class="token string">&quot;UP&quot;</span><span class="token punctuation">}</span>
</code></pre></div><h4 id="optional-2-way-ssl"><a href="#optional-2-way-ssl" class="header-anchor">#</a> optional 2-way SSL</h4> <p>If your <code>User Info Service</code> is configured to use 2-way SSL then <code>skills-service</code> must add the following client authentication properties (Java System Properties):
<div class="content__default" data-v-5b51558b><div class="language-properties extra-class"><pre class="language-properties"><code><span class="token comment"># Keystore</span>
<span class="token attr-name">-Djavax.net.ssl.keyStore</span><span class="token punctuation">=</span><span class="token attr-value">/certs/keystore.p12</span>
<span class="token attr-name">-Djavax.net.ssl.keyStoreType</span><span class="token punctuation">=</span><span class="token attr-value">PKCS12</span>
<span class="token attr-name">-Djavax.net.ssl.keyStorePassword</span><span class="token punctuation">=</span>

<span class="token comment"># Truststore</span>
<span class="token attr-name">-Djavax.net.ssl.trustStore</span><span class="token punctuation">=</span><span class="token attr-value">/certs/truststore.p12</span>
<span class="token attr-name">-Djavax.net.ssl.trustStoreType</span><span class="token punctuation">=</span><span class="token attr-value">PKCS12</span>
<span class="token attr-name">-Djavax.net.ssl.trustStorePassword</span><span class="token punctuation">=</span>
</code></pre></div></div></p></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">2/1/2022, 4:14:04 AM</span></div></footer> <!----> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.18f93df7.js" defer></script><script src="/assets/js/2.703736e5.js" defer></script><script src="/assets/js/70.eddd348c.js" defer></script><script src="/assets/js/45.39615dab.js" defer></script><script src="/assets/js/56.9f958365.js" defer></script><script src="/assets/js/64.b0239d01.js" defer></script><script src="/assets/js/65.c4a2592c.js" defer></script>
  </body>
</html>
